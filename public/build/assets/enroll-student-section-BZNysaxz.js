import{r as g,j as t,u as ue,s as Z}from"./app-B1roWHvk.js";import{a as q}from"./academic-year-Cv2jpkoL.js";import{s as $e,a as Ne}from"./grade-thunk-CDlUy6mO.js";import{b as Re}from"./subject-thunk-d2GmtTcT.js";import{S as Me,A as _e}from"./Snackbar-hLsFVdN4.js";import{B as I}from"./Button-d_RD6y5B.js";import{M as We}from"./Modal-BsKrsdAf.js";import{B as Ie}from"./Box-DhMmJPkG.js";import{T as Te}from"./TextField-Bu0G27jC.js";import{F as J,I as Q,S as ee}from"./Select-C5Pdo9da.js";import{M as w}from"./MenuItem-GEQ2EQlH.js";import{a as re,g as ne,s as _,u as he,c as ie,b as oe,F as Y,E as le,m as Pe,e as Ee}from"./DefaultPropsProvider-QUnMvqoE.js";import{k as ge,f as xe}from"./TransitionGroupContext-cbUrGPGY.js";import{a as Ae,b as Ge}from"./Popover-C8xNgV66.js";import{u as Le}from"./useTheme-B9WcfdZX.js";import{e as Be}from"./extendSxProp-CTuCRLgi.js";import{C as He}from"./CircularProgress-BxePU0oI.js";import{C as Oe}from"./Card-7t4DTLpM.js";import{t as pe,T as O}from"./Typography-CLeyHGOQ.js";import{C as me}from"./Checkbox-1BqfORRD.js";import{D as Ue,L as Ye,a as ze,b as De}from"./ListItemText-T7HOcPfe.js";import"./useSlot-hWzzcCrf.js";import"./resolveComponentProps-B511JlNd.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./createSvgIcon-OpWp3RSR.js";import"./Paper-zv5dsESB.js";import"./IconButton-CA8VS-gj.js";import"./ButtonBase-BQUxgWUu.js";import"./useSlotProps-CjMsfRLZ.js";import"./ownerWindow-CO8Ksk3k.js";import"./Grow-BgvEi15t.js";import"./utils-CoptfH35.js";import"./useId-B8pDYw_S.js";import"./InputBase-B6zP2K_E.js";import"./isHostComponent-DVu5iVWx.js";import"./index-DeqmpwUx.js";import"./debounce-Be36O1Ab.js";import"./react-is.production.min-DUDD-a5e.js";import"./index-C_c96urp.js";import"./useControlled-CX3K9I1h.js";import"./listItemTextClasses-OV7GurAo.js";function Fe(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Ve(e){return parseFloat(e)}function Xe(e){return ne("MuiCardHeader",e)}const U=re("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Ke=e=>{const{classes:a}=e;return oe({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Xe,a)},Ze=_("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>({[`& .${U.title}`]:a.title,[`& .${U.subheader}`]:a.subheader,...a.root})})({display:"flex",alignItems:"center",padding:16}),qe=_("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Je=_("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Qe=_("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto",[`.${pe.root}:where(& .${U.title})`]:{display:"block"},[`.${pe.root}:where(& .${U.subheader})`]:{display:"block"}}),et=g.forwardRef(function(a,r){const n=he({props:a,name:"MuiCardHeader"}),{action:i,avatar:s,className:c,component:d="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:u,title:f,titleTypographyProps:h,...b}=n,x={...n,component:d,disableTypography:m},j=Ke(x);let C=f;C!=null&&C.type!==O&&!m&&(C=t.jsx(O,{variant:s?"body2":"h5",className:j.title,component:"span",...h,children:C}));let y=p;return y!=null&&y.type!==O&&!m&&(y=t.jsx(O,{variant:s?"body2":"body1",className:j.subheader,color:"textSecondary",component:"span",...u,children:y})),t.jsxs(Ze,{className:ie(j.root,c),as:d,ref:r,ownerState:x,...b,children:[s&&t.jsx(qe,{className:j.avatar,ownerState:x,children:s}),t.jsxs(Qe,{className:j.content,ownerState:x,children:[C,y]}),i&&t.jsx(Je,{className:j.action,ownerState:x,children:i})]})}),fe=g.createContext();function tt(e){return ne("MuiGrid",e)}const at=[0,1,2,3,4,5,6,7,8,9,10],st=["column-reverse","column","row-reverse","row"],rt=["nowrap","wrap-reverse","wrap"],T=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],E=re("MuiGrid",["root","container","item","zeroMinWidth",...at.map(e=>`spacing-xs-${e}`),...st.map(e=>`direction-xs-${e}`),...rt.map(e=>`wrap-xs-${e}`),...T.map(e=>`grid-xs-${e}`),...T.map(e=>`grid-sm-${e}`),...T.map(e=>`grid-md-${e}`),...T.map(e=>`grid-lg-${e}`),...T.map(e=>`grid-xl-${e}`)]);function nt({theme:e,ownerState:a}){let r;return e.breakpoints.keys.reduce((n,i)=>{let s={};if(a[i]&&(r=a[i]),!r)return n;if(r===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const c=Y({values:a.columns,breakpoints:e.breakpoints.values}),d=typeof c=="object"?c[i]:c;if(d==null)return n;const m=`${Math.round(r/d*1e8)/1e6}%`;let p={};if(a.container&&a.item&&a.columnSpacing!==0){const u=e.spacing(a.columnSpacing);if(u!=="0px"){const f=`calc(${m} + ${u})`;p={flexBasis:f,maxWidth:f}}}s={flexBasis:m,flexGrow:0,maxWidth:m,...p}}return e.breakpoints.values[i]===0?Object.assign(n,s):n[e.breakpoints.up(i)]=s,n},{})}function it({theme:e,ownerState:a}){const r=Y({values:a.direction,breakpoints:e.breakpoints.values});return le({theme:e},r,n=>{const i={flexDirection:n};return n.startsWith("column")&&(i[`& > .${E.item}`]={maxWidth:"none"}),i})}function be({breakpoints:e,values:a}){let r="";Object.keys(a).forEach(i=>{r===""&&a[i]!==0&&(r=i)});const n=Object.keys(e).sort((i,s)=>e[i]-e[s]);return n.slice(0,n.indexOf(r))}function ot({theme:e,ownerState:a}){const{container:r,rowSpacing:n}=a;let i={};if(r&&n!==0){const s=Y({values:n,breakpoints:e.breakpoints.values});let c;typeof s=="object"&&(c=be({breakpoints:e.breakpoints.values,values:s})),i=le({theme:e},s,(d,m)=>{const p=e.spacing(d);return p!=="0px"?{marginTop:e.spacing(-d),[`& > .${E.item}`]:{paddingTop:p}}:c!=null&&c.includes(m)?{}:{marginTop:0,[`& > .${E.item}`]:{paddingTop:0}}})}return i}function lt({theme:e,ownerState:a}){const{container:r,columnSpacing:n}=a;let i={};if(r&&n!==0){const s=Y({values:n,breakpoints:e.breakpoints.values});let c;typeof s=="object"&&(c=be({breakpoints:e.breakpoints.values,values:s})),i=le({theme:e},s,(d,m)=>{const p=e.spacing(d);if(p!=="0px"){const u=e.spacing(-d);return{width:`calc(100% + ${p})`,marginLeft:u,[`& > .${E.item}`]:{paddingLeft:p}}}return c!=null&&c.includes(m)?{}:{width:"100%",marginLeft:0,[`& > .${E.item}`]:{paddingLeft:0}}})}return i}function ct(e,a,r={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[r[`spacing-xs-${String(e)}`]];const n=[];return a.forEach(i=>{const s=e[i];Number(s)>0&&n.push(r[`spacing-${i}-${String(s)}`])}),n}const dt=_("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e,{container:n,direction:i,item:s,spacing:c,wrap:d,zeroMinWidth:m,breakpoints:p}=r;let u=[];n&&(u=ct(c,p,a));const f=[];return p.forEach(h=>{const b=r[h];b&&f.push(a[`grid-${h}-${String(b)}`])}),[a.root,n&&a.container,s&&a.item,m&&a.zeroMinWidth,...u,i!=="row"&&a[`direction-xs-${String(i)}`],d!=="wrap"&&a[`wrap-xs-${String(d)}`],...f]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),it,ot,lt,nt);function ut(e,a){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const r=[];return a.forEach(n=>{const i=e[n];if(Number(i)>0){const s=`spacing-${n}-${String(i)}`;r.push(s)}}),r}const pt=e=>{const{classes:a,container:r,direction:n,item:i,spacing:s,wrap:c,zeroMinWidth:d,breakpoints:m}=e;let p=[];r&&(p=ut(s,m));const u=[];m.forEach(h=>{const b=e[h];b&&u.push(`grid-${h}-${String(b)}`)});const f={root:["root",r&&"container",i&&"item",d&&"zeroMinWidth",...p,n!=="row"&&`direction-xs-${String(n)}`,c!=="wrap"&&`wrap-xs-${String(c)}`,...u]};return oe(f,tt,a)},P=g.forwardRef(function(a,r){const n=Ae({props:a,name:"MuiGrid"}),{breakpoints:i}=Le(),s=Be(n),{className:c,columns:d,columnSpacing:m,component:p="div",container:u=!1,direction:f="row",item:h=!1,rowSpacing:b,spacing:x=0,wrap:j="wrap",zeroMinWidth:C=!1,...y}=s,z=b||x,A=m||x,D=g.useContext(fe),$=u?d||12:D,F={},G={...y};i.keys.forEach(N=>{y[N]!=null&&(F[N]=y[N],delete G[N])});const L={...s,columns:$,container:u,direction:f,item:h,rowSpacing:z,columnSpacing:A,wrap:j,zeroMinWidth:C,spacing:x,...F,breakpoints:i.keys},B=pt(L);return t.jsx(fe.Provider,{value:$,children:t.jsx(dt,{ownerState:L,className:ie(B.root,c),as:p,ref:r,...G})})});function mt(e){return ne("MuiSkeleton",e)}re("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const ft=e=>{const{classes:a,variant:r,animation:n,hasChildren:i,width:s,height:c}=e;return oe({root:["root",r,n,i&&"withChildren",i&&!s&&"fitContent",i&&!c&&"heightAuto"]},mt,a)},ae=ge`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,se=ge`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,ht=typeof ae!="string"?xe`
        animation: ${ae} 2s ease-in-out 0.5s infinite;
      `:null,gt=typeof se!="string"?xe`
        animation: ${se} 2s linear 0.5s infinite;
      `:null,xt=_("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],r.animation!==!1&&a[r.animation],r.hasChildren&&a.withChildren,r.hasChildren&&!r.width&&a.fitContent,r.hasChildren&&!r.height&&a.heightAuto]}})(Pe(({theme:e})=>{const a=Fe(e.shape.borderRadius)||"px",r=Ve(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Ee(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${a}/${Math.round(r/.6*10)/10}${a}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:n})=>n.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:n})=>n.hasChildren&&!n.width,style:{maxWidth:"fit-content"}},{props:({ownerState:n})=>n.hasChildren&&!n.height,style:{height:"auto"}},{props:{animation:"pulse"},style:ht||{animation:`${ae} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:{"&::after":gt||{animation:`${se} 2s linear 0.5s infinite`}}}]}})),S=g.forwardRef(function(a,r){const n=he({props:a,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:c="span",height:d,style:m,variant:p="text",width:u,...f}=n,h={...n,animation:i,component:c,variant:p,hasChildren:!!f.children},b=ft(h);return t.jsx(xt,{as:c,ref:r,className:ie(b.root,s),ownerState:h,...f,style:{width:u,height:d,...m}})}),bt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",boxShadow:24,p:4};function k(e,a){return e.filter(r=>!a.includes(r))}function te(e,a){return e.filter(r=>a.includes(r))}function vt(e,a){return[...e,...k(a,e)]}function oa({subject:e}){var de;const[a,r]=g.useState(!1),[n,i]=g.useState(!1),[s,c]=g.useState({}),[d,m]=g.useState({}),p=window.location.pathname.split("/")[3],[u,f]=g.useState([]),[h,b]=g.useState([]),[x,j]=g.useState([]),[C,y]=g.useState(!1),[z,A]=g.useState({available:[],registered:[]}),[D,$]=g.useState({isOpen:!1,message:"",type:""}),[F,G]=g.useState([]),L=window.location.search,B=new URLSearchParams(L),N={academic_year:B.get("academic_year")??q()[q().length-1],semester:B.get("semester")??"1st Semester"},{year_grade:V}=ue(o=>o.grades),{subject_list:X}=ue(o=>o.subjects);console.log("subject_list",X);const ve=()=>r(!0);g.useEffect(()=>{c({...s,...N,student_id:p,year:"1st Year"})},[]),g.useEffect(()=>{if(s.semester&&s.academic_year&&s.year){async function o(l){y(!0);try{await Z.dispatch(Re(s)),G(X),y(!1)}catch{y(!1)}}o()}},[s.semester,s.academic_year,s.year]);const ye=X.filter(o=>{var l,v;return!((v=(l=V.user)==null?void 0:l.grades)!=null&&v.some(H=>H.subject_code===o.code))}).map(o=>({name:o==null?void 0:o.name,value:o.code}));console.log("bbbb",(de=V.user)==null?void 0:de.grades),g.useEffect(()=>{var o;b(ye),j((o=V.user)==null?void 0:o.grades.filter(l=>l.year===s.year&&l.semester===s.semester&&l.academic_year===s.academic_year).map(l=>({value:l.subject.code,name:l.subject.name})))},[C,a]);async function je(o){i(!0);const l=await Z.dispatch($e({...s,...z}));l.status==200?(Z.dispatch(Ne(p,`?academic_year=${s.academic_year}&semester=${s.semester}`)),m({}),i(!1),$({isOpen:!0,message:"Student updated!",type:"success"}),r(!1)):(i(!1),$({isOpen:!0,message:l.data.response,type:"warning"}))}const K=(o,l)=>{l!=="clickaway"&&$(!1)},R=te(u,h),M=te(u,x),Ce=o=>()=>{const l=u.indexOf(o),v=[...u];l===-1?v.push(o):v.splice(l,1),f(v)},W=o=>te(u,o).length,we=o=>()=>{W(o)===(o==null?void 0:o.length)?f(k(u,o)):f(vt(u,o))},Se=()=>{j(x.concat(R)),A({available:k(h,R),registered:x.concat(R)}),b(k(h,R)),f(k(u,R))},ke=()=>{b(h.concat(M)),A({available:h.concat(M),registered:k(x,M)}),j(k(x,M)),f(k(u,M))},ce=(o,l)=>t.jsxs(Oe,{children:[t.jsx(et,{sx:{px:2,py:1},avatar:t.jsx(me,{onClick:we(l),checked:W(l)===(l==null?void 0:l.length)&&(l==null?void 0:l.length)!==0,indeterminate:W(l)!==(l==null?void 0:l.length)&&W(l)!==0,disabled:(l==null?void 0:l.length)===0,inputProps:{"aria-label":"all items selected"}}),title:o,subheader:`${W(l)}/${l==null?void 0:l.length} selected`}),t.jsx(Ue,{}),t.jsx(Ge,{sx:{width:200,height:230,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list",children:l==null?void 0:l.map(v=>{const H=v.value;return console.log("valuevalue",v),t.jsxs(Ye,{role:"listitem",onClick:Ce(v),children:[t.jsx(ze,{children:t.jsx(me,{checked:u.includes(v),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":H}})}),t.jsx(De,{id:H,primary:`${v.name}`})]},v)})})]});return t.jsxs(t.Fragment,{children:[t.jsx(Me,{open:D.isOpen,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:K,children:t.jsx(_e,{onClose:K,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully Created!"})}),t.jsx(I,{variant:"contained",onClick:ve,children:"Enroll Student"}),t.jsx(We,{open:a,onClose:K,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(Ie,{sx:bt,children:t.jsx("div",{className:" px-3 w-full flex flex-col items-center justify-between pb-5",children:t.jsxs("div",{className:"flex flex-col gap-3  w-full",children:[t.jsxs("div",{className:"flex w-full items-center justify-between",children:[t.jsx("div",{className:"text-2xl font-black",children:"Enroll Student"}),t.jsx("div",{children:t.jsx(I,{onClick:()=>r(!1),variant:"contained",children:"Close"})})]}),t.jsxs("div",{className:" px-3 w-full flex flex-col items-center justify-between pb-5",children:[t.jsxs("div",{className:"flex flex-col gap-3  w-full",children:[t.jsx(Te,{onChange:o=>c({...s,[o.target.name]:o.target.value}),value:s==null?void 0:s.student_id,error:!!(d!=null&&d.student_id),helperText:(d==null?void 0:d.student_id)??"",name:"student_id",disabled:!0,type:"text",id:"outlined-basic",label:"Student ID",variant:"outlined"}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Year"}),t.jsxs(ee,{id:"demo-simple-select",name:"year",label:"year",value:s.year,onChange:o=>c({...s,[o.target.name]:o.target.value}),children:[t.jsx(w,{value:"1st Year",children:"1st Year"}),t.jsx(w,{value:"2nd Year",children:"2nd Year"}),t.jsx(w,{value:"3rd Year",children:"3rd Year"}),t.jsx(w,{value:"4th Year",children:"4th Year"})]})]}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Semester"}),t.jsxs(ee,{id:"demo-simple-select",name:"semester",label:"Semester",value:s.semester,onChange:o=>c({...s,[o.target.name]:o.target.value}),children:[t.jsx(w,{value:"1st Semester",children:"1st Semester"}),t.jsx(w,{value:"2nd Semester",children:"2nd Semester"}),t.jsx(w,{value:"Summer",children:"Summer"})]})]}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Academic Year"}),t.jsx(ee,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s.academic_year,name:"academic_year",label:"Academic Year",onChange:o=>c({...s,[o.target.name]:o.target.value}),children:q().map((o,l)=>t.jsx(w,{value:o,children:o},l))})]}),C?t.jsxs(t.Fragment,{children:[t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"})]}):t.jsx(t.Fragment,{children:t.jsxs(P,{container:!0,spacing:5,className:"w-full flex",sx:{justifyContent:"center",alignItems:"center"},children:[t.jsx(P,{item:!0,children:ce("Available Subjects",h)}),t.jsx(P,{item:!0,children:t.jsxs(P,{container:!0,direction:"column",sx:{alignItems:"center"},children:[t.jsx(I,{sx:{my:.5},variant:"outlined",size:"small",onClick:Se,disabled:R.length===0,"aria-label":"move selected right",children:">"}),t.jsx(I,{sx:{my:.5},variant:"outlined",size:"small",onClick:ke,disabled:M.length===0,"aria-label":"move selected left",children:"<"})]})}),t.jsx(P,{item:!0,children:ce("Registered Subjects",x)})]})})]}),t.jsx("br",{}),t.jsx(I,{onClick:je,disabled:n,variant:"contained",className:" w-full",children:n?t.jsx(He,{size:24,color:"inherit"}):"Submit"})]})]})})})})]})}export{oa as default};
