import{r as g,j as t,u as ue,s as Z}from"./app-Bnhi9wLo.js";import{a as q}from"./academic-year-DlQnTtF1.js";import{s as $e,a as Ne}from"./grade-thunk-IHSnIZEE.js";import{b as Re}from"./subject-thunk-VfVLz70w.js";import{S as Me,A as _e}from"./Snackbar-BA7udRow.js";import{B as T}from"./Button-MI76Y-ZE.js";import{M as We}from"./Modal-9Pi0y45g.js";import{B as Ie}from"./Box-BqS1cH4t.js";import{T as Te}from"./TextField-_isL-AyM.js";import{F as J,I as Q,S as ee}from"./Select-B5tmCrj-.js";import{M as w}from"./MenuItem-BekeklTu.js";import{a as re,g as ne,s as W,u as he,c as ie,b as oe,F as Y,E as le,m as Pe,e as Ee}from"./DefaultPropsProvider-CmnbIxSL.js";import{k as ge,f as xe}from"./TransitionGroupContext-Bb2GSSkJ.js";import{a as Ae,b as Ge}from"./Popover-r57PRSIw.js";import{u as Le}from"./useTheme-CBfunliY.js";import{e as Be}from"./extendSxProp-Dw_j9Hbz.js";import{C as He}from"./CircularProgress-BVfbLaRT.js";import{C as Oe}from"./Card-DV46xTHi.js";import{t as pe,T as O}from"./Typography-CohNZsm1.js";import{C as me}from"./Checkbox-CZF9ByuR.js";import{D as Ue,L as Ye,a as ze,b as De}from"./ListItemText-DLAcVejb.js";import"./useSlot-OMmnVV6Z.js";import"./resolveComponentProps-BrAuOP8H.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./createSvgIcon-6sJtNlXg.js";import"./Paper-DbhUBNyK.js";import"./IconButton-Dsu4U9OJ.js";import"./ButtonBase-DR5cPpEX.js";import"./useSlotProps-DzeOcB2G.js";import"./ownerWindow-CO8Ksk3k.js";import"./Grow-BdaZN15T.js";import"./utils-Cndl0c6Z.js";import"./useId-LC6VrJyT.js";import"./InputBase-JEJMRTIZ.js";import"./isHostComponent-DVu5iVWx.js";import"./index-C6SlmKbt.js";import"./debounce-Be36O1Ab.js";import"./react-is.production.min-DUDD-a5e.js";import"./index-CYzntoRv.js";import"./useControlled-B_CJYdON.js";import"./listItemTextClasses-wSxvYwc0.js";function Fe(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function Ve(e){return parseFloat(e)}function Xe(e){return ne("MuiCardHeader",e)}const U=re("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Ke=e=>{const{classes:a}=e;return oe({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Xe,a)},Ze=W("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,a)=>({[`& .${U.title}`]:a.title,[`& .${U.subheader}`]:a.subheader,...a.root})})({display:"flex",alignItems:"center",padding:16}),qe=W("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,a)=>a.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Je=W("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,a)=>a.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Qe=W("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,a)=>a.content})({flex:"1 1 auto",[`.${pe.root}:where(& .${U.title})`]:{display:"block"},[`.${pe.root}:where(& .${U.subheader})`]:{display:"block"}}),et=g.forwardRef(function(a,r){const n=he({props:a,name:"MuiCardHeader"}),{action:o,avatar:s,className:c,component:d="div",disableTypography:m=!1,subheader:p,subheaderTypographyProps:u,title:f,titleTypographyProps:h,...v}=n,b={...n,component:d,disableTypography:m},j=Ke(b);let C=f;C!=null&&C.type!==O&&!m&&(C=t.jsx(O,{variant:s?"body2":"h5",className:j.title,component:"span",...h,children:C}));let y=p;return y!=null&&y.type!==O&&!m&&(y=t.jsx(O,{variant:s?"body2":"body1",className:j.subheader,color:"textSecondary",component:"span",...u,children:y})),t.jsxs(Ze,{className:ie(j.root,c),as:d,ref:r,ownerState:b,...v,children:[s&&t.jsx(qe,{className:j.avatar,ownerState:b,children:s}),t.jsxs(Qe,{className:j.content,ownerState:b,children:[C,y]}),o&&t.jsx(Je,{className:j.action,ownerState:b,children:o})]})}),fe=g.createContext();function tt(e){return ne("MuiGrid",e)}const at=[0,1,2,3,4,5,6,7,8,9,10],st=["column-reverse","column","row-reverse","row"],rt=["nowrap","wrap-reverse","wrap"],P=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],A=re("MuiGrid",["root","container","item","zeroMinWidth",...at.map(e=>`spacing-xs-${e}`),...st.map(e=>`direction-xs-${e}`),...rt.map(e=>`wrap-xs-${e}`),...P.map(e=>`grid-xs-${e}`),...P.map(e=>`grid-sm-${e}`),...P.map(e=>`grid-md-${e}`),...P.map(e=>`grid-lg-${e}`),...P.map(e=>`grid-xl-${e}`)]);function nt({theme:e,ownerState:a}){let r;return e.breakpoints.keys.reduce((n,o)=>{let s={};if(a[o]&&(r=a[o]),!r)return n;if(r===!0)s={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const c=Y({values:a.columns,breakpoints:e.breakpoints.values}),d=typeof c=="object"?c[o]:c;if(d==null)return n;const m=`${Math.round(r/d*1e8)/1e6}%`;let p={};if(a.container&&a.item&&a.columnSpacing!==0){const u=e.spacing(a.columnSpacing);if(u!=="0px"){const f=`calc(${m} + ${u})`;p={flexBasis:f,maxWidth:f}}}s={flexBasis:m,flexGrow:0,maxWidth:m,...p}}return e.breakpoints.values[o]===0?Object.assign(n,s):n[e.breakpoints.up(o)]=s,n},{})}function it({theme:e,ownerState:a}){const r=Y({values:a.direction,breakpoints:e.breakpoints.values});return le({theme:e},r,n=>{const o={flexDirection:n};return n.startsWith("column")&&(o[`& > .${A.item}`]={maxWidth:"none"}),o})}function be({breakpoints:e,values:a}){let r="";Object.keys(a).forEach(o=>{r===""&&a[o]!==0&&(r=o)});const n=Object.keys(e).sort((o,s)=>e[o]-e[s]);return n.slice(0,n.indexOf(r))}function ot({theme:e,ownerState:a}){const{container:r,rowSpacing:n}=a;let o={};if(r&&n!==0){const s=Y({values:n,breakpoints:e.breakpoints.values});let c;typeof s=="object"&&(c=be({breakpoints:e.breakpoints.values,values:s})),o=le({theme:e},s,(d,m)=>{const p=e.spacing(d);return p!=="0px"?{marginTop:e.spacing(-d),[`& > .${A.item}`]:{paddingTop:p}}:c!=null&&c.includes(m)?{}:{marginTop:0,[`& > .${A.item}`]:{paddingTop:0}}})}return o}function lt({theme:e,ownerState:a}){const{container:r,columnSpacing:n}=a;let o={};if(r&&n!==0){const s=Y({values:n,breakpoints:e.breakpoints.values});let c;typeof s=="object"&&(c=be({breakpoints:e.breakpoints.values,values:s})),o=le({theme:e},s,(d,m)=>{const p=e.spacing(d);if(p!=="0px"){const u=e.spacing(-d);return{width:`calc(100% + ${p})`,marginLeft:u,[`& > .${A.item}`]:{paddingLeft:p}}}return c!=null&&c.includes(m)?{}:{width:"100%",marginLeft:0,[`& > .${A.item}`]:{paddingLeft:0}}})}return o}function ct(e,a,r={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[r[`spacing-xs-${String(e)}`]];const n=[];return a.forEach(o=>{const s=e[o];Number(s)>0&&n.push(r[`spacing-${o}-${String(s)}`])}),n}const dt=W("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e,{container:n,direction:o,item:s,spacing:c,wrap:d,zeroMinWidth:m,breakpoints:p}=r;let u=[];n&&(u=ct(c,p,a));const f=[];return p.forEach(h=>{const v=r[h];v&&f.push(a[`grid-${h}-${String(v)}`])}),[a.root,n&&a.container,s&&a.item,m&&a.zeroMinWidth,...u,o!=="row"&&a[`direction-xs-${String(o)}`],d!=="wrap"&&a[`wrap-xs-${String(d)}`],...f]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),it,ot,lt,nt);function ut(e,a){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const r=[];return a.forEach(n=>{const o=e[n];if(Number(o)>0){const s=`spacing-${n}-${String(o)}`;r.push(s)}}),r}const pt=e=>{const{classes:a,container:r,direction:n,item:o,spacing:s,wrap:c,zeroMinWidth:d,breakpoints:m}=e;let p=[];r&&(p=ut(s,m));const u=[];m.forEach(h=>{const v=e[h];v&&u.push(`grid-${h}-${String(v)}`)});const f={root:["root",r&&"container",o&&"item",d&&"zeroMinWidth",...p,n!=="row"&&`direction-xs-${String(n)}`,c!=="wrap"&&`wrap-xs-${String(c)}`,...u]};return oe(f,tt,a)},E=g.forwardRef(function(a,r){const n=Ae({props:a,name:"MuiGrid"}),{breakpoints:o}=Le(),s=Be(n),{className:c,columns:d,columnSpacing:m,component:p="div",container:u=!1,direction:f="row",item:h=!1,rowSpacing:v,spacing:b=0,wrap:j="wrap",zeroMinWidth:C=!1,...y}=s,z=v||b,G=m||b,D=g.useContext(fe),N=u?d||12:D,F={},L={...y};o.keys.forEach(R=>{y[R]!=null&&(F[R]=y[R],delete L[R])});const B={...s,columns:N,container:u,direction:f,item:h,rowSpacing:z,columnSpacing:G,wrap:j,zeroMinWidth:C,spacing:b,...F,breakpoints:o.keys},H=pt(B);return t.jsx(fe.Provider,{value:N,children:t.jsx(dt,{ownerState:B,className:ie(H.root,c),as:p,ref:r,...L})})});function mt(e){return ne("MuiSkeleton",e)}re("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const ft=e=>{const{classes:a,variant:r,animation:n,hasChildren:o,width:s,height:c}=e;return oe({root:["root",r,n,o&&"withChildren",o&&!s&&"fitContent",o&&!c&&"heightAuto"]},mt,a)},ae=ge`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,se=ge`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,ht=typeof ae!="string"?xe`
        animation: ${ae} 2s ease-in-out 0.5s infinite;
      `:null,gt=typeof se!="string"?xe`
        animation: ${se} 2s linear 0.5s infinite;
      `:null,xt=W("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:r}=e;return[a.root,a[r.variant],r.animation!==!1&&a[r.animation],r.hasChildren&&a.withChildren,r.hasChildren&&!r.width&&a.fitContent,r.hasChildren&&!r.height&&a.heightAuto]}})(Pe(({theme:e})=>{const a=Fe(e.shape.borderRadius)||"px",r=Ve(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Ee(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${a}/${Math.round(r/.6*10)/10}${a}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:n})=>n.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:n})=>n.hasChildren&&!n.width,style:{maxWidth:"fit-content"}},{props:({ownerState:n})=>n.hasChildren&&!n.height,style:{height:"auto"}},{props:{animation:"pulse"},style:ht||{animation:`${ae} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:{"&::after":gt||{animation:`${se} 2s linear 0.5s infinite`}}}]}})),S=g.forwardRef(function(a,r){const n=he({props:a,name:"MuiSkeleton"}),{animation:o="pulse",className:s,component:c="span",height:d,style:m,variant:p="text",width:u,...f}=n,h={...n,animation:o,component:c,variant:p,hasChildren:!!f.children},v=ft(h);return t.jsx(xt,{as:c,ref:r,className:ie(v.root,s),ownerState:h,...f,style:{width:u,height:d,...m}})}),bt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:800,bgcolor:"background.paper",boxShadow:24,p:4};function k(e,a){return e.filter(r=>!a.includes(r))}function te(e,a){return e.filter(r=>a.includes(r))}function vt(e,a){return[...e,...k(a,e)]}function oa({subject:e}){var de;const[a,r]=g.useState(!1),[n,o]=g.useState(!1),[s,c]=g.useState({}),[d,m]=g.useState({}),p=window.location.pathname.split("/")[3],[u,f]=g.useState([]),[h,v]=g.useState([]),[b,j]=g.useState([]),[C,y]=g.useState(!1),[z,G]=g.useState({available:[],registered:[]}),[D,N]=g.useState({isOpen:!1,message:"",type:""}),[F,L]=g.useState([]),B=window.location.search,H=new URLSearchParams(B),R={academic_year:H.get("academic_year")??q()[q().length-1],semester:H.get("semester")??"1st Semester"},{year_grade:V}=ue(l=>l.grades),{subject_list:X}=ue(l=>l.subjects);console.log("subject_list",X);const ve=()=>r(!0);g.useEffect(()=>{c({...s,...R,student_id:p,year:"1st Year"})},[]),g.useEffect(()=>{if(s.semester&&s.academic_year&&s.year){async function l(i){y(!0);try{await Z.dispatch(Re(s)),L(X),y(!1)}catch{y(!1)}}l()}},[s.semester,s.academic_year,s.year]);const ye=X.filter(l=>{var i,x;return!((x=(i=V.user)==null?void 0:i.grades)!=null&&x.some($=>$.subject_code===l.code))}).map(l=>({name:l==null?void 0:l.name,value:l.code}));console.log("bbbb",(de=V.user)==null?void 0:de.grades),g.useEffect(()=>{var l;v(ye),j((l=V.user)==null?void 0:l.grades.filter(i=>i.year===s.year&&i.semester===s.semester&&i.academic_year===s.academic_year).map(i=>{var x,$;return{value:(x=i==null?void 0:i.subject)==null?void 0:x.code,name:($=i==null?void 0:i.subject)==null?void 0:$.name}}))},[C,a]);async function je(l){o(!0);const i=await Z.dispatch($e({...s,...z}));i.status==200?(Z.dispatch(Ne(p,`?academic_year=${s.academic_year}&semester=${s.semester}`)),m({}),o(!1),N({isOpen:!0,message:"Student updated!",type:"success"}),r(!1)):(o(!1),N({isOpen:!0,message:i.data.response,type:"warning"}))}const K=(l,i)=>{i!=="clickaway"&&N(!1)},M=te(u,h),_=te(u,b),Ce=l=>()=>{const i=u.indexOf(l),x=[...u];i===-1?x.push(l):x.splice(i,1),f(x)},I=l=>te(u,l).length,we=l=>()=>{I(l)===(l==null?void 0:l.length)?f(k(u,l)):f(vt(u,l))},Se=()=>{j(b.concat(M)),G({available:k(h,M),registered:b.concat(M)}),v(k(h,M)),f(k(u,M))},ke=()=>{v(h.concat(_)),G({available:h.concat(_),registered:k(b,_)}),j(k(b,_)),f(k(u,_))},ce=(l,i)=>t.jsxs(Oe,{children:[t.jsx(et,{sx:{px:2,py:1},avatar:t.jsx(me,{onClick:we(i),checked:I(i)===(i==null?void 0:i.length)&&(i==null?void 0:i.length)!==0,indeterminate:I(i)!==(i==null?void 0:i.length)&&I(i)!==0,disabled:(i==null?void 0:i.length)===0,inputProps:{"aria-label":"all items selected"}}),title:l,subheader:`${I(i)}/${i==null?void 0:i.length} selected`}),t.jsx(Ue,{}),t.jsx(Ge,{sx:{width:200,height:230,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list",children:i==null?void 0:i.map(x=>{const $=x.value;return console.log("valuevalue",x),t.jsxs(Ye,{role:"listitem",onClick:Ce(x),children:[t.jsx(ze,{children:t.jsx(me,{checked:u.includes(x),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":$}})}),t.jsx(De,{id:$,primary:`${x.name}`})]},x)})})]});return t.jsxs(t.Fragment,{children:[t.jsx(Me,{open:D.isOpen,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,onClose:K,children:t.jsx(_e,{onClose:K,severity:"success",variant:"filled",sx:{width:"100%"},children:"Successfully Created!"})}),t.jsx(T,{variant:"contained",onClick:ve,children:"Enroll Student"}),t.jsx(We,{open:a,onClose:K,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsx(Ie,{sx:bt,children:t.jsx("div",{className:" px-3 w-full flex flex-col items-center justify-between pb-5",children:t.jsxs("div",{className:"flex flex-col gap-3  w-full",children:[t.jsxs("div",{className:"flex w-full items-center justify-between",children:[t.jsx("div",{className:"text-2xl font-black",children:"Enroll Student"}),t.jsx("div",{children:t.jsx(T,{onClick:()=>r(!1),variant:"contained",children:"Close"})})]}),t.jsxs("div",{className:" px-3 w-full flex flex-col items-center justify-between pb-5",children:[t.jsxs("div",{className:"flex flex-col gap-3  w-full",children:[t.jsx(Te,{onChange:l=>c({...s,[l.target.name]:l.target.value}),value:s==null?void 0:s.student_id,error:!!(d!=null&&d.student_id),helperText:(d==null?void 0:d.student_id)??"",name:"student_id",disabled:!0,type:"text",id:"outlined-basic",label:"Student ID",variant:"outlined"}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Year"}),t.jsxs(ee,{id:"demo-simple-select",name:"year",label:"year",value:s.year,onChange:l=>c({...s,[l.target.name]:l.target.value}),children:[t.jsx(w,{value:"1st Year",children:"1st Year"}),t.jsx(w,{value:"2nd Year",children:"2nd Year"}),t.jsx(w,{value:"3rd Year",children:"3rd Year"}),t.jsx(w,{value:"4th Year",children:"4th Year"})]})]}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Semester"}),t.jsxs(ee,{id:"demo-simple-select",name:"semester",label:"Semester",value:s.semester,onChange:l=>c({...s,[l.target.name]:l.target.value}),children:[t.jsx(w,{value:"1st Semester",children:"1st Semester"}),t.jsx(w,{value:"2nd Semester",children:"2nd Semester"}),t.jsx(w,{value:"Summer",children:"Summer"})]})]}),t.jsxs(J,{fullWidth:!0,children:[t.jsx(Q,{id:"demo-simple-select-label",children:"Academic Year"}),t.jsx(ee,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:s.academic_year,name:"academic_year",label:"Academic Year",onChange:l=>c({...s,[l.target.name]:l.target.value}),children:q().map((l,i)=>t.jsx(w,{value:l,children:l},i))})]}),C?t.jsxs(t.Fragment,{children:[t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"}),t.jsx(S,{animation:"wave"})]}):t.jsx(t.Fragment,{children:t.jsxs(E,{container:!0,spacing:5,className:"w-full flex",sx:{justifyContent:"center",alignItems:"center"},children:[t.jsx(E,{item:!0,children:ce("Available Subjects",h)}),t.jsx(E,{item:!0,children:t.jsxs(E,{container:!0,direction:"column",sx:{alignItems:"center"},children:[t.jsx(T,{sx:{my:.5},variant:"outlined",size:"small",onClick:Se,disabled:M.length===0,"aria-label":"move selected right",children:">"}),t.jsx(T,{sx:{my:.5},variant:"outlined",size:"small",onClick:ke,disabled:_.length===0,"aria-label":"move selected left",children:"<"})]})}),t.jsx(E,{item:!0,children:ce("Registered Subjects",b)})]})})]}),t.jsx("br",{}),t.jsx(T,{onClick:je,disabled:n,variant:"contained",className:" w-full",children:n?t.jsx(He,{size:24,color:"inherit"}):"Submit"})]})]})})})})]})}export{oa as default};
